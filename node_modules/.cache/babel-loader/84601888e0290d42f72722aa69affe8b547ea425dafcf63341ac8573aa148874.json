{"ast":null,"code":"import React,{useState,useRef,useEffect}from\"react\";import{BrowserQRCodeReader}from\"@zxing/library\";import*as tmImage from\"@teachablemachine/image\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BarcodePartMatcher(){const[step,setStep]=useState(0);const[qrText,setQRText]=useState(\"\");const[predictedClass,setPredictedClass]=useState(\"\");const[result,setResult]=useState(\"\");const[capturedImage,setCapturedImage]=useState(null);const videoRef=useRef(null);const canvasRef=useRef(null);const modelRef=useRef(null);const resetApp=()=>{console.log(\"Resetting app\");setStep(0);setQRText(\"\");setPredictedClass(\"\");setResult(\"\");setCapturedImage(null);};const getRearCameraStream=async()=>{const devices=await navigator.mediaDevices.enumerateDevices();const videoDevices=devices.filter(device=>device.kind===\"videoinput\");const rearCamera=videoDevices.find(device=>device.label.toLowerCase().includes(\"back\"))||videoDevices.find(device=>device.label.toLowerCase().includes(\"environment\"))||videoDevices[videoDevices.length-1];const constraints={audio:false,video:{deviceId:rearCamera?{exact:rearCamera.deviceId}:undefined,facingMode:{ideal:\"environment\"},width:{ideal:1280},height:{ideal:720}}};return await navigator.mediaDevices.getUserMedia(constraints);};const stopCamera=()=>{const video=videoRef.current;if(video&&video.srcObject){video.srcObject.getTracks().forEach(track=>track.stop());video.srcObject=null;}};const startQRScanner=async()=>{console.log(\"Starting QR scanner\");setStep(1);const videoElement=videoRef.current;try{stopCamera();const stream=await getRearCameraStream();videoElement.srcObject=stream;videoElement.setAttribute(\"playsinline\",\"true\");videoElement.setAttribute(\"autoplay\",\"true\");videoElement.setAttribute(\"muted\",\"true\");videoElement.setAttribute(\"controls\",\"false\");videoElement.muted=true;await videoElement.play();const qrReader=new BrowserQRCodeReader();const interval=setInterval(async()=>{try{const result=await qrReader.decodeOnceFromVideoElement(videoElement);console.log(\"QR Code Detected:\",result.getText());setQRText(result.getText());clearInterval(interval);stopCamera();setStep(2);}catch(e){// keep scanning\n}},1000);}catch(error){console.error(\"Camera access failed:\",error);}};const startPartCamera=async()=>{console.log(\"Starting part camera\");const videoElement=videoRef.current;try{stopCamera();const stream=await getRearCameraStream();videoElement.srcObject=stream;videoElement.setAttribute(\"playsinline\",\"true\");videoElement.setAttribute(\"autoplay\",\"true\");videoElement.setAttribute(\"muted\",\"true\");videoElement.setAttribute(\"controls\",\"false\");videoElement.muted=true;await videoElement.play();await new Promise(resolve=>{videoElement.onloadedmetadata=()=>resolve();});console.log(\"Part camera ready\");}catch(error){console.error(\"Camera access for part photo failed:\",error);}};const loadModel=async()=>{try{const URL=\"/model\";const modelURL=URL+\"/model.json\";const metadataURL=URL+\"/metadata.json\";console.log(\"Loading model from:\",modelURL,metadataURL);const model=await tmImage.load(modelURL,metadataURL);modelRef.current=model;console.log(\"Model loaded successfully\");}catch(error){console.error(\"Model load failed:\",error);}};const capturePartImage=async()=>{const video=videoRef.current;const canvas=canvasRef.current;if(!video||!canvas||!video.videoWidth||!video.videoHeight){console.error(\"Video or canvas not ready\");return;}const context=canvas.getContext(\"2d\");canvas.width=video.videoWidth;canvas.height=video.videoHeight;context.drawImage(video,0,0,canvas.width,canvas.height);const imageDataURL=canvas.toDataURL(\"image/png\");setCapturedImage(imageDataURL);const image=new Image();image.src=imageDataURL;await new Promise(resolve=>image.onload=resolve);try{const prediction=await modelRef.current.predict(image);console.log(\"Prediction result:\",prediction);const top=prediction.sort((a,b)=>b.probability-a.probability)[0];setPredictedClass(top.className);if(top.className===qrText){setResult(\"Match\");}else{setResult(\"Incorrect\");}}catch(error){console.error(\"Prediction failed:\",error);}stopCamera();setStep(3);};useEffect(()=>{loadModel();},[]);useEffect(()=>{if(step===2){startPartCamera();}},[step]);const resultClass=result===\"Match\"?\"bg-green-200\":result===\"Incorrect\"?\"bg-red-200\":\"\";return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 max-w-md mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"QR Code-Part Matcher\"}),step===0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-4\",children:\"Welcome. Press start to begin QR code scanning.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 bg-blue-600 text-white rounded\",onClick:startQRScanner,children:\"Start\"})]}),step===1&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-2\",children:\"Step 1: Scan QR Code\"}),/*#__PURE__*/_jsx(\"video\",{ref:videoRef,className:\"w-full h-auto border\"})]}),step===2&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-2\",children:\"Step 2: Take a photo of the part\"}),/*#__PURE__*/_jsx(\"video\",{ref:videoRef,className:\"w-full h-auto border mb-2\",autoPlay:true,playsInline:true,muted:true}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 bg-green-600 text-white rounded\",onClick:capturePartImage,children:\"Capture Part Photo\"}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,className:\"hidden\"})]}),step===3&&/*#__PURE__*/_jsxs(\"div\",{className:`p-4 rounded ${resultClass}`,children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-semibold\",children:[\"Result: \",result]}),capturedImage&&/*#__PURE__*/_jsx(\"img\",{src:capturedImage,alt:\"Captured Part\",className:\"w-full mt-2 border\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:[\"QR Code: \",qrText]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Predicted Class: \",predictedClass]}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-4 px-4 py-2 bg-blue-600 text-white rounded\",onClick:resetApp,children:\"Reset\"})]})]});}","map":{"version":3,"names":["React","useState","useRef","useEffect","BrowserQRCodeReader","tmImage","jsx","_jsx","jsxs","_jsxs","BarcodePartMatcher","step","setStep","qrText","setQRText","predictedClass","setPredictedClass","result","setResult","capturedImage","setCapturedImage","videoRef","canvasRef","modelRef","resetApp","console","log","getRearCameraStream","devices","navigator","mediaDevices","enumerateDevices","videoDevices","filter","device","kind","rearCamera","find","label","toLowerCase","includes","length","constraints","audio","video","deviceId","exact","undefined","facingMode","ideal","width","height","getUserMedia","stopCamera","current","srcObject","getTracks","forEach","track","stop","startQRScanner","videoElement","stream","setAttribute","muted","play","qrReader","interval","setInterval","decodeOnceFromVideoElement","getText","clearInterval","e","error","startPartCamera","Promise","resolve","onloadedmetadata","loadModel","URL","modelURL","metadataURL","model","load","capturePartImage","canvas","videoWidth","videoHeight","context","getContext","drawImage","imageDataURL","toDataURL","image","Image","src","onload","prediction","predict","top","sort","a","b","probability","className","resultClass","children","onClick","ref","autoPlay","playsInline","alt"],"sources":["C:/Users/Chris Littlejohn/Downloads/barcode-matcher-final-project (1)/src/BarcodePartMatcher.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { BrowserQRCodeReader } from \"@zxing/library\";\nimport * as tmImage from \"@teachablemachine/image\";\n\nexport default function BarcodePartMatcher() {\n  const [step, setStep] = useState(0);\n  const [qrText, setQRText] = useState(\"\");\n  const [predictedClass, setPredictedClass] = useState(\"\");\n  const [result, setResult] = useState(\"\");\n  const [capturedImage, setCapturedImage] = useState(null);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const modelRef = useRef(null);\n\n  const resetApp = () => {\n    console.log(\"Resetting app\");\n    setStep(0);\n    setQRText(\"\");\n    setPredictedClass(\"\");\n    setResult(\"\");\n    setCapturedImage(null);\n  };\n\n  const getRearCameraStream = async () => {\n    const devices = await navigator.mediaDevices.enumerateDevices();\n    const videoDevices = devices.filter(device => device.kind === \"videoinput\");\n    const rearCamera = videoDevices.find(device => device.label.toLowerCase().includes(\"back\"))\n      || videoDevices.find(device => device.label.toLowerCase().includes(\"environment\"))\n      || videoDevices[videoDevices.length - 1];\n\n    const constraints = {\n      audio: false,\n      video: {\n        deviceId: rearCamera ? { exact: rearCamera.deviceId } : undefined,\n        facingMode: { ideal: \"environment\" },\n        width: { ideal: 1280 },\n        height: { ideal: 720 }\n      }\n    };\n\n    return await navigator.mediaDevices.getUserMedia(constraints);\n  };\n\n  const stopCamera = () => {\n    const video = videoRef.current;\n    if (video && video.srcObject) {\n      video.srcObject.getTracks().forEach(track => track.stop());\n      video.srcObject = null;\n    }\n  };\n\n  const startQRScanner = async () => {\n    console.log(\"Starting QR scanner\");\n    setStep(1);\n    const videoElement = videoRef.current;\n\n    try {\n      stopCamera();\n      const stream = await getRearCameraStream();\n      videoElement.srcObject = stream;\n      videoElement.setAttribute(\"playsinline\", \"true\");\n      videoElement.setAttribute(\"autoplay\", \"true\");\n      videoElement.setAttribute(\"muted\", \"true\");\n      videoElement.setAttribute(\"controls\", \"false\");\n      videoElement.muted = true;\n      await videoElement.play();\n\n      const qrReader = new BrowserQRCodeReader();\n      const interval = setInterval(async () => {\n        try {\n          const result = await qrReader.decodeOnceFromVideoElement(videoElement);\n          console.log(\"QR Code Detected:\", result.getText());\n          setQRText(result.getText());\n          clearInterval(interval);\n          stopCamera();\n          setStep(2);\n        } catch (e) {\n          // keep scanning\n        }\n      }, 1000);\n    } catch (error) {\n      console.error(\"Camera access failed:\", error);\n    }\n  };\n\n  const startPartCamera = async () => {\n    console.log(\"Starting part camera\");\n    const videoElement = videoRef.current;\n\n    try {\n      stopCamera();\n      const stream = await getRearCameraStream();\n      videoElement.srcObject = stream;\n      videoElement.setAttribute(\"playsinline\", \"true\");\n      videoElement.setAttribute(\"autoplay\", \"true\");\n      videoElement.setAttribute(\"muted\", \"true\");\n      videoElement.setAttribute(\"controls\", \"false\");\n      videoElement.muted = true;\n      await videoElement.play();\n\n      await new Promise(resolve => {\n        videoElement.onloadedmetadata = () => resolve();\n      });\n\n      console.log(\"Part camera ready\");\n    } catch (error) {\n      console.error(\"Camera access for part photo failed:\", error);\n    }\n  };\n\n  const loadModel = async () => {\n    try {\n      const URL = \"/model\";\n      const modelURL = URL + \"/model.json\";\n      const metadataURL = URL + \"/metadata.json\";\n      console.log(\"Loading model from:\", modelURL, metadataURL);\n      const model = await tmImage.load(modelURL, metadataURL);\n      modelRef.current = model;\n      console.log(\"Model loaded successfully\");\n    } catch (error) {\n      console.error(\"Model load failed:\", error);\n    }\n  };\n\n  const capturePartImage = async () => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n\n    if (!video || !canvas || !video.videoWidth || !video.videoHeight) {\n      console.error(\"Video or canvas not ready\");\n      return;\n    }\n\n    const context = canvas.getContext(\"2d\");\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    context.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n    const imageDataURL = canvas.toDataURL(\"image/png\");\n    setCapturedImage(imageDataURL);\n\n    const image = new Image();\n    image.src = imageDataURL;\n    await new Promise(resolve => (image.onload = resolve));\n\n    try {\n      const prediction = await modelRef.current.predict(image);\n      console.log(\"Prediction result:\", prediction);\n      const top = prediction.sort((a, b) => b.probability - a.probability)[0];\n      setPredictedClass(top.className);\n\n      if (top.className === qrText) {\n        setResult(\"Match\");\n      } else {\n        setResult(\"Incorrect\");\n      }\n    } catch (error) {\n      console.error(\"Prediction failed:\", error);\n    }\n\n    stopCamera();\n    setStep(3);\n  };\n\n  useEffect(() => {\n    loadModel();\n  }, []);\n\n  useEffect(() => {\n    if (step === 2) {\n      startPartCamera();\n    }\n  }, [step]);\n\n  const resultClass = result === \"Match\"\n    ? \"bg-green-200\"\n    : result === \"Incorrect\"\n    ? \"bg-red-200\"\n    : \"\";\n\n  return (\n    <div className=\"p-6 max-w-md mx-auto\">\n      <h1 className=\"text-2xl font-bold mb-4\">QR Code-Part Matcher</h1>\n\n      {step === 0 && (\n        <div>\n          <p className=\"mb-4\">Welcome. Press start to begin QR code scanning.</p>\n          <button className=\"px-4 py-2 bg-blue-600 text-white rounded\" onClick={startQRScanner}>Start</button>\n        </div>\n      )}\n\n      {step === 1 && (\n        <div>\n          <p className=\"mb-2\">Step 1: Scan QR Code</p>\n          <video ref={videoRef} className=\"w-full h-auto border\" />\n        </div>\n      )}\n\n      {step === 2 && (\n        <div>\n          <p className=\"mb-2\">Step 2: Take a photo of the part</p>\n          <video ref={videoRef} className=\"w-full h-auto border mb-2\" autoPlay playsInline muted />\n          <button className=\"px-4 py-2 bg-green-600 text-white rounded\" onClick={capturePartImage}>Capture Part Photo</button>\n          <canvas ref={canvasRef} className=\"hidden\" />\n        </div>\n      )}\n\n      {step === 3 && (\n        <div className={`p-4 rounded ${resultClass}`}>\n          <p className=\"text-lg font-semibold\">Result: {result}</p>\n          {capturedImage && <img src={capturedImage} alt=\"Captured Part\" className=\"w-full mt-2 border\" />}        \n          <p className=\"text-sm text-gray-600 mt-2\">QR Code: {qrText}</p>\n          <p className=\"text-sm text-gray-600\">Predicted Class: {predictedClass}</p>\n          <button className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded\" onClick={resetApp}>Reset</button>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}